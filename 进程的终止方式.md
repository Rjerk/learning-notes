# 进程的终止

## 进程的终止：_exit() 和 exit()

进程终止有两种方式：其一为异常终止，由一对信号的接收而引发，该信号的默认动作为终止当前进程，可能产生核心转储文件。此外，进程可以调用 _exit() 系统调用正常终止。

```
#inlcude <unistd.h>

void _exit(int status);
```

_exit() 的 status 参数定义了进程的终止状态，父进程可以调用 wait() 获取该状态。

终止状态为 0 表示进程 “功成身退”，非 0 则表示进程因异常而终止。

调用 _eixt() 的程序总会成功终止。（从不返回）

程序一般不直接调用 _exit()，而是调用 exit() 库函数，它在调用 _exit() 前执行各种动作。

```
#include <stdlib.h>

void exit(int status);
```

exit() 会执行的动作如下：

- 调用退出处理程序，其执行顺序和注册顺序相反
- 刷新 stdio 流缓冲区
- 使用由 status 提供的值执行 _exit() 系统调用

程序的另一种终止方法是从 main 函数中返回，或者或明或暗地一直执行到 main 函数的结尾。执行 return n 等于执行对 exit(n) 的调用，因为调用 main 的运行时函数会将 main 的返回值作为 exit() 的参数。

执行未指定返回值的 return，或是无声无息地执行到 main 函数的结尾，同样会导致 main 的调用者执行 exit() 函数，不过，其结果视 C 语言标准版本和编译器而定。 